<p id="notice"><%= notice %></p>

<p>
  <strong>Category:</strong>
  <%= @budget.category.name %>
</p>

<p>
  <strong>Budget month:</strong>
  <%= @budget.budget_month.strftime('%B %Y') %>
</p>

<p>
  <strong>Amount:</strong>
  <%= number_to_currency(@budget.amount) %>
</p>

<p>
  <strong>Spendings:</strong>
  <%= number_to_currency(@budget.spendings.sum(:amount)) %>
</p>

<p>
  <strong>Diff: </strong>
  <%= number_to_currency(@budget.amount - @budget.spendings.sum(:amount)) %>
</p>

<%= link_to 'Edit', edit_budget_path(@budget) %> |
<%= link_to 'Back', budgets_path %>

<h2>Spendings</h2>

<table>
  <thead>
    <tr>
      <th><%= sortable "description" %></th>
      <th><%= sortable "category_id", "Category" %></th>
      <th><%= sortable "spending_date", "Date" %></th>
      <th><%= sortable "amount" %></th>
      <th><%= sortable "payment_method_id", "Payment Method" %></th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @budget.spendings.each do |spending| %>
      <tr>
        <td><%= spending.description %></td>
        <td><%= spending.category.name %></td>
        <td><%= spending.spending_date %></td>
        <td><%= number_to_currency(spending.amount) %></td>
        <td><%= spending.payment_method.name %></td>
        <td><%= link_to 'Show', spending %></td>
        <td><%= link_to 'Edit', edit_spending_path(spending) %></td>
        <td><%= link_to 'Destroy', spending, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>
